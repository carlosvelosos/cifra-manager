import CifraDisplay from "@/components/cifra-display";
import FloatingMenu from "@/components/floating-menu";
import { convertToStructure } from "@/lib/parsers/cifra-converter";
// URL: https://www.cifraclub.com.br/marilia-mendonca/estranho/

const cifra = `Marília Mendonça - Estranho

[Intro] <b>D5</b>  <b>G7M</b>  <b>D/A</b>  <b>F#m</b>
        <b>Bm7</b>  <b>A/C#</b>  <b>D</b>  <b>D/F#</b>

Parte 1 de 2

<span class="tablatura">   <b>D5</b>  <b>G7M</b>      <b>D/A</b>      <b>F#m</b>
<span class="cnt">E|-5---0-2---5--0-2---5--0-2-------0-2------|
B|-3-------3--------3----------2-3----------|
G|-2-------0----2--------2---2--------------|
D|------------------------------------------|
A|--------------0---------------------------|
E|-----3-----------------2------------------|</span></span>

Parte 2 de 2

<span class="tablatura">  <b>Bm7</b>  <b>A/C#</b>  <b>D</b>   <b>D/F#</b>  
<span class="cnt">E|------------------------------------------|
B|-3----2-----------------------------------|
G|-2----2----2------------------------------|
D|-4----2----4----4-------------------------|
A|-2----4----5----5-------------------------|
E|----------------2-------------------------|</span></span>

[Primeira Parte]

 <b>G9</b>
Deixa eu perguntar uma coisa
     <b>A4</b>
Não tá dando certo entre a gente?
               <b>Bm7</b>
Quem cala, consente
                             <b>A</b>
Eu acho que deu pra entender

       <b>G9</b>
Minha mão já não tá mais na sua
   <b>A4</b>                      <b>F#m7</b>
A gente anda pela rua separados
                   <b>Bm7</b>  <b>A</b>
Nem parecemos namorados

     <b>G9</b>
A aliança virou enfeite do dedo
       <b>A4</b>
Nossa cama agora é só pra dormir mesmo
       <b>F#m7</b>
E, no carro, parece que eu tô levando 
                 <b>Bm7</b>  <b>A/C#</b>  <b>D</b>  <b>D/F#</b>
Um simples passageiro

[Primeira Parte]

Parte 1 de 3

<span class="tablatura">   <b>G9</b>  <b>A4</b>  <b>Bm7</b>            <b>A</b>
<span class="cnt">E|-----0------------------------------------|
B|-0---3---3---2-3----3---2-----------------|
G|-2---2---2-4-----4--2---2-----------------|
D|-0-------4----------4---2-----------------|
A|-----0---2----------2---0-----------------|
E|-3----------------------------------------|</span></span>

Parte 2 de 3

<span class="tablatura">   <b>G9</b>  <b>A4</b>  <b>F#m7</b>    <b>Bm7</b>    <b>A</b>
<span class="cnt">E|-----0------------------------------------|
B|-0---3---5---5---3--3---2-----------------|
G|-2---2---2-2-2-2-2--2---2-----------------|
D|-0-------2-------4--4---2-----------------|
A|-----0-----------2--2---0-----------------|
E|-3-------2--------------------------------|</span></span>

Parte 3 de 3

<span class="tablatura">   <b>G9</b>  <b>A4</b>  <b>F#m7</b>       <b>Bm7</b>  <b>A/C#</b>  <b>D</b>   <b>D/F#</b>
<span class="cnt">E|-----0------------------------------------|
B|-0---3---5--5--5--5--3----2----3----------|
G|-2---2---2--2--2--2--2----2----2----------|
D|-0-------2--2--2--2--4----2----4----4-----|
A|-----0---------------2----4----5----5-----|
E|-3-------2--2--2--2-----------------2-----|</span></span>

[Refrão]

    <b>G</b>
Estranho
                               <b>A9</b>
Você me beija e minha boca estranha
                            <b>F#m7(11)</b>
O seu carinho parece que arranha

O seu abraço é tão solto
        <b>Bm7</b>
Não consegue me prender

    <b>G</b>
Estranho
                               <b>A9</b>
Você me beija e minha boca estranha
                            <b>F#m7(11)</b>
O seu carinho parece que arranha

O seu abraço é tão solto
       (passagem)
Não consegue me prender

Onde eu desconheci você?

<b>G</b>  <b>A9</b>  <b>F#m7(11)</b>  (passagem)

[Passagem]

<span class="tablatura"><span class="cnt">E|------------------------------------------|
B|------------------------------------------|
G|---2---2---2---2--------------------------|
D|---------0--------------------------------|
A|-2---4------------------------------------|
E|-------------2----------------------------|</span></span>

[Primeira Parte]

       <b>G</b>
Minha mão já não tá mais na sua
   <b>A9</b>                      <b>F#m7(11)</b>
A gente anda pela rua separados
                   <b>Bm7</b>
Nem parecemos namorados

     <b>G</b>
A aliança virou enfeite do dedo
       <b>A9</b>
Nossa cama agora é só pra dormir mesmo
       <b>F#m7(11)</b>
E, no carro, parece que eu tô levando
                 (passagem)
Um simples passageiro

[Refrão]

    <b>G</b>
Estranho
                               <b>A9</b>
Você me beija e minha boca estranha
                            <b>F#m7(11)</b>
O seu carinho parece que arranha

O seu abraço é tão solto
        <b>Bm7</b>
Não consegue me prender

    <b>G</b>
Estranho
                               <b>A9</b>
Você me beija e minha boca estranha
                            <b>F#m7(11)</b>
O seu carinho parece que arranha

O seu abraço é tão solto
       (passagem)
Não consegue me prender
                      <b>G</b>
Onde eu desconheci você?
                      <b>A9</b>  <b>F#m7(11)</b>
Onde eu desconheci você?
(passagem)     <b>G</b>
           Estranho

----------------- Acordes -----------------
A = P2 2 2 2
A/C# = 7 6 5 7
A4 = 2 2 3 0
A9 = P2 4 2 2
Bm7 = 4 2 3 4
D = 4 2 3 4
F#m = 4 2 2 4
F#m7 = 4 P2 2 2
F#m7(11) = 11 11 12 14
G = 5 4 3 5
G7M = 5 4 3 4
G9 = 0 2 0 0`;

const [title, ...restOfCifra] = cifra.split("\n\n");
const chordsSectionIndex = restOfCifra.findIndex((line) =>
  line.includes("----------------- Acordes -----------------")
);
const mainCifra = restOfCifra.slice(0, chordsSectionIndex).join("\n\n");
const chords = restOfCifra.slice(chordsSectionIndex).join("\n\n");

export default function EstranhoPage() {

    // Convert HTML to structured data
  const cifraStructure = convertToStructure(
    mainCifra || "",
    title || "",
    "https://www.cifraclub.com.br/marilia-mendonca/estranho/"
  );

  return (
    <>
      <CifraDisplay
        title={title || ""}
        cifraData={cifraStructure}
        // Fallback to old format if needed
        mainCifra={mainCifra || ""}
        chords={chords || ""}
      />
      <FloatingMenu />
    </>
  );
}
