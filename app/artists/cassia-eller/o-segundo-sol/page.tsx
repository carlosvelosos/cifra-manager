import CifraDisplay from "@/components/cifra-display";
import FloatingMenu from "@/components/floating-menu";
import { convertToStructure } from "@/lib/parsers/cifra-converter";

// URL: https://www.cifraclub.com.br/cassia-eller/o-segundo-sol/

const cifra = `Cássia Eller - O Segundo Sol

[Intro] <b>A9</b>

[Primeira Parte]

<b>E</b>                          <b>Bm7</b>
  Quando o segundo sol chegar
      <b>D</b>                           <b>A</b>     
Para realinhar as órbitas dos planetas

<span class="tablatura">[Tab - Passagem]
    
                  <b>E</b>
<span class="cnt">E|----------------3------------------|
B|----------------3------------------|
G|----------------4------------------|
D|----------------5------------------|
A|----------------5------------------|
E|---------6p5p3--3------------------|</span></span>

<b>E</b>                               <b>Bm7</b>
  Derrubando com assombro exemplar
             <b>D</b>
O que os astrônomos diriam se tratar
       <b>A</b>
De um outro cometa

<b>E</b>                          <b>Bm7</b>
  Quando o segundo sol chegar
      <b>D</b>                           <b>A</b>
Para realinhar as órbitas dos planetas
<b>E</b>                               <b>Bm7</b>
  Derrubando com assombro exemplar
             <b>D</b>
O que os astrônomos diriam se tratar
       <b>A</b>
De um outro cometa

[Segunda Parte]

<span class="tablatura">[Tab - Passagem]

<span class="cnt">E|-----------------------------------|
B|-5---5-----5-----------------------|
G|-5---5-----5-----------------------|
D|-5h7-5-----5h7---------------5h7---|
A|--------7-------------5h7----------|
E|----------------5h7----------------|</span></span>

<span class="tablatura">[Tab - Riff 1 - 2x]

    <b>E</b>
<span class="cnt">E|--3--------------------------------|
B|--3--------------------------------|
G|--4---7-9-10-9-10-12/14-12---------|
D|--5--------------------------------|
A|--5---5-7--8-7--8-10/12-10---------|
E|--3--------------------------------|</span></span>

<span class="tablatura"><span class="cnt">E|--3--------------------------------|
B|--3--------------------------------|
G|--4---7-9-10-9-10-12/14-14/16------|
D|--5---x-x--x-x--x--x--x--x--x------|
A|--5---5-7--8-7--8-10/12-12/14------|
E|--3--------------------------------|</span></span>

                             <b>E</b>           
Não digo que não me surpreendi

Antes que eu visse, você disse 
                 <b>E</b>
E eu não pude acreditar

<span class="tablatura">[Tab - Riff 2]

   <b>E</b>
<span class="cnt">E|-3---------------------------------|
B|-3---------------------------------|
G|-4--7-9-10-9-14-12-10--------------|
D|-5---------------------------------|
A|-5--5-7-8--7-12-10-8---------------|
E|-3---------------------------------|</span></span>

[Refrão]

<b>D</b>           <b>A/C#</b>        <b>Bm7</b>
  Mas você pode ter certeza
<b>A</b>                              <b>Em7</b>
  De que o seu telefone irá tocar
    <b>D</b>           
Em sua nova casa 
       <b>A/C#</b>          <b>Bm7</b>
Que abriga agora a trilha
     <b>A</b>                   <b>G</b>
Incluída nessa minha conversão
<b>A</b>                     <b>Em7</b>
  Eu só queria te contar
               <b>D</b>
Que eu fui lá fora 

E vi dois sois num dia
<b>A/C#</b>            <b>Bm7</b>      <b>A</b>
     E a vida que ardia sem explicação

[Primeira Parte]

<b>E</b>                          <b>Bm7</b>
  Quando o segundo sol chegar
      <b>D</b>                           <b>A</b>     
Para realinhar as órbitas dos planetas

<span class="tablatura">[Tab - Passagem]

                  <b>E</b>
<span class="cnt">E|----------------3------------------|
B|----------------3------------------|
G|----------------4------------------|
D|----------------5------------------|
A|----------------5------------------|
E|---------6p5p3--3------------------|</span></span>

<b>E</b>                               <b>Bm7</b>
  Derrubando com assombro exemplar
             <b>D</b>
O que os astrônomos diriam se tratar
       <b>A</b>
De um outro cometa

[Segunda Parte]

<span class="tablatura">[Tab - Passagem]

<span class="cnt">E|-----------------------------------|
B|-5---5-----5-----------------------|
G|-5---5-----5-----------------------|
D|-5h7-5-----5h7---------------5h7---|
A|--------7-------------5h7----------|
E|----------------5h7----------------|</span></span>

<span class="tablatura">[Tab - Riff 1 - 2x]

    <b>E</b>
<span class="cnt">E|--3--------------------------------|
B|--3--------------------------------|
G|--4---7-9-10-9-10-12/14-12---------|
D|--5--------------------------------|
A|--5---5-7--8-7--8-10/12-10---------|
E|--3--------------------------------|</span></span>

<span class="tablatura"><span class="cnt">E|--3--------------------------------|
B|--3--------------------------------|
G|--4---7-9-10-9-10-12/14-14/16------|
D|--5---x-x--x-x--x--x--x--x--x------|
A|--5---5-7--8-7--8-10/12-12/14------|
E|--3--------------------------------|</span></span>

 <b>E</b>                             
Não digo que não me surpreendi

Antes que eu visse, você disse 
                 <b>E</b>
E eu não pude acreditar

<span class="tablatura">[Tab - Riff 2]

   <b>E</b>
<span class="cnt">E|-3---------------------------------|
B|-3---------------------------------|
G|-4--7-9-10-9-14-12-10--------------|
D|-5---------------------------------|
A|-5--5-7-8--7-12-10-8---------------|
E|-3---------------------------------|</span></span>

[Refrão]

<b>D</b>           <b>A/C#</b>        <b>Bm7</b>
  Mas você pode ter certeza
<b>A</b>                              <b>Em7</b>
  De que o seu telefone irá tocar
    <b>D</b>           
Em sua nova casa 
       <b>A/C#</b>          <b>Bm7</b>
Que abriga agora a trilha
     <b>A</b>                   <b>G</b>
Incluída nessa minha conversão
<b>A</b>                     <b>Em7</b>
  Eu só queria te contar
               <b>D</b>
Que eu fui lá fora 

E vi dois sois num dia
<b>A/C#</b>            <b>Bm7</b>      <b>A</b>
     E a vida que ardia sem explicação

    <b>D</b>            <b>A</b>
Explicação não, tem explicação
    <b>D</b>                <b>A</b>
Explicação não, não tem explicação
    <b>D</b>                    <b>A/C#</b>  <b>Bm7</b>
Explicação não tem explica____ção
 <b>A</b>   <b>D/F#</b>  <b>A</b>
Não tem,  não tem

----------------- Acordes -----------------
Capotraste na 3ª casa
C*  = X 0 2 2 2 0 - (*D# na forma de C)
C/E*  = X 4 P2 2 2 X - (*D#/G na forma de C/E)
C9*  = X 0 2 2 0 0 - (*D#9 na forma de C9)
Dm7*  = X 2 4 2 3 2 - (*Fm7 na forma de Dm7)
F*  = X X 0 P2 3 2 - (*G# na forma de F)
F/A*  = 2 X 0 2 3 X - (*G#/C na forma de F/A)
G*  = 0 2 2 1 0 0 - (*A# na forma de G)
Gm7*  = 0 2 2 0 3 0 - (*A#m7 na forma de Gm7)
A#*  = 3 2 0 0 3 3 - (*C# na forma de A#)`;

const [title, ...restOfCifra] = cifra.split("\n\n");
const chordsSectionIndex = restOfCifra.findIndex((line) =>
  line.includes("----------------- Acordes -----------------")
);
const mainCifra = restOfCifra.slice(0, chordsSectionIndex).join("\n\n");
const chords = restOfCifra.slice(chordsSectionIndex).join("\n\n");

export default function OSegundoSolPage() {

    // Convert HTML to structured data
  const cifraStructure = convertToStructure(
    mainCifra || "",
    title || "",
    "https://www.cifraclub.com.br/cassia-eller/o-segundo-sol/"
  );

  return (
    <>
      <CifraDisplay
        title={title || ""}
        cifraData={cifraStructure}
        // Fallback to old format if needed
        mainCifra={mainCifra || ""}
        chords={chords || ""}
      />
      <FloatingMenu />
    </>
  );
}
