import CifraDisplay from "@/components/cifra-display";
import FloatingMenu from "@/components/floating-menu";
import FramerTransitionWrapper from "@/components/framer-transition-wrapper";
import { convertToStructure } from "@/lib/parsers/cifra-converter";

// URL: https://www.cifraclub.com.br/cpm-22/um-minuto-para-fim-do-mundo/

const cifra = `CPM 22 - Um Minuto Para o Fim do Mundo

[Intro] <b>A5</b>  <b>C5</b>  <b>G5</b>  <b>F5</b>
        <b>A5</b>  <b>C5</b>  <b>G5</b>  <b>F5</b> 

<span class="tablatura">[Tab - Intro]

<span class="cnt">E|-------0-------------0------------------------------|
B|---1------1------1------1---------------------------|
G|-2---2---------2---2-------2------------------------| (3x)
D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

[Primeira Parte]

<span class="tablatura">[Tab - Primeira Parte]

Parte 1 de 3
<span class="cnt">E|-------0-----3-----0------3------0------3------0----|
B|---1-----1-----1------1------1------1------1------1-|
G|-2---2-----2-----2------2------2------2------2------|
D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

<span class="tablatura">Parte 2 de 3
<span class="cnt">E|-3-----0------3------0------3------0------3------0--|
B|---1------1------1------1------1------1------1------|
G|-----2------2------2------2------2------2------2----|
D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

<span class="tablatura">Parte 3 de 3
<span class="cnt">E|----------------------------------------------------|
B|-1---1----------------------------------------------|
G|---2---2--------------------------------------------|
D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

<b>A5</b>             <b>C5</b>  <b>G5</b>
   Me sinto só
                <b>F5</b>
Mas quem é que nunca 
                <b>A5</b>
Se sentiu assim
                 <b>C5</b>
Procurando um caminho 
                <b>G5</b>     <b>F5</b>
Pra seguir uma direção
          <b>A5</b>
Respostas

      <b>C5</b>                 <b>G5</b>
Um minuto para o fim do mundo
          <b>F5</b>           <b>A5</b>
Toda sua vida em 60 segundos 
                 <b>C5</b>
Uma volta no ponteiro do relógio 
     <b>G5</b>   <b>F5</b>
Pra viver

[Pré-Refrão]

<span class="tablatura">[Tab - Pré-Refrão]

Parte 1 de 2
<span class="cnt">E|-----0--------3--------1----------------------------|
B|---1--------1--------1------------------------------|
G|-2--------0--------0--------------------------------| (2x)
D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

<span class="tablatura">Parte 2 de 2
<span class="cnt">E|-----0--------3----1-1-1...-------------------------|
B|---1--------1------1-1-1...-------------------------|
G|-2--------0-----------------------------------------|
D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>


O tempo corre contra mim

Sempre foi assim 
              <b>A5</b>  <b>F5</b>
E sempre vai ser
                       <b>C5</b>
Vivendo apenas pra vencer 
          <b>G5</b>            <b>A5</b>  <b>F5</b>
A falta que me faz você

             <b>C5</b>
De olhos fechados 
               <b>G5</b>         <b>A5</b>  <b>F5</b>
Eu tento esconder a dor agora
             <b>C5</b>
Por favor entenda 
       <b>G5</b>                 <b>C5</b>
Eu preciso ir embora porque

[Refrão]

                    <b>G5</b>
Quando estou com você
           <b>F5</b>       <b>C5</b>
Sinto meu mundo acabar
                          <b>G5</b>
Perco o chão sob os meus pés
                        <b>C5</b>
Me falta o ar pra respirar

            <b>G5</b>
E só de pensar 
                       <b>F5</b>
Em te perder por um segundo
           <b>G5</b>
Eu sei que isso é o fim do mundo

[Primeiro Solo] <b>C5</b>  <b>G5</b>  <b>A5</b>  <b>F5</b>
                <b>C5</b>  <b>G5</b>  <b>A5</b>  <b>F5</b>

<span class="tablatura">Parte 1 de 6                    
<span class="cnt">E|----------------------------------------------------|
B|----------------------------------------------------|
G|-5--5--5-5-5-5--5-5--5-5-5-5-9--9--9-9-9-7--7-7-----|
D|----------------------------------------------------|
A|-3--3--3-3-3-3--3-3--3-3-3-3-7--7--7-7-7-5--5-5-----|
E|----------------------------------------------------|
   ↓  ↓  ↓ ↑ ↓ ↑  ↑ ↓  ↓ ↑ ↓ ↑ ↓  ↓  ↓ ↑ ↓ ↑  ↑ ↓</span></span>

<span class="tablatura">Parte 2 de 6
<span class="cnt">E|----------------------------------------------------|
B|----------------------------------------------------|
G|-7-7-7-7-14--14--14-14-14-12--12-12--12-12-12-12----|
D|----------------------------------------------------|
A|-5-5-5-5-12--12--12-12-12-10--10-10--10-10-10-10----|
E|----------------------------------------------------|
   ↓ ↑ ↓ ↑  ↓   ↓   ↓  ↑  ↓  ↑   ↑  ↓   ↓  ↑  ↓  ↑</span></span>

<span class="tablatura">Parte 3 de 6
<span class="cnt">E|----------------------------------------------------|
B|----------------------------------------------------|
G|-17--17--17-17-17-16--16-16--16-16-16-16------------|
D|----------------------------------------------------|
A|-15--15--15-15-15-14--14-14--14-14-14-14------------|
E|----------------------------------------------------|
    ↓   ↓   ↓  ↑  ↓  ↑   ↑  ↓   ↓  ↑  ↓  ↑</span></span>

<span class="tablatura">Parte 4 de 6
<span class="cnt">E|----------------------------------------------------|
B|----------------------------------------------------|
G|-5--5--5-5-5-5--5-5--5-5-5-5-9--9--9-9-9-7--7-7-----|
D|----------------------------------------------------|
A|-3--3--3-3-3-3--3-3--3-3-3-3-7--7--7-7-7-5--5-5-----|
E|----------------------------------------------------|
   ↓  ↓  ↓ ↑ ↓ ↑  ↑ ↓  ↓ ↑ ↓ ↑ ↓  ↓  ↓ ↑ ↓ ↑  ↑ ↓</span></span>

<span class="tablatura">Parte 5 de 6
<span class="cnt">E|----------------------------------------------------|
B|----------------------------------------------------|
G|-7-7-7-7-14--14--14-14-14-12--12-12--12-12-12-12----|
D|----------------------------------------------------|
A|-5-5-5-5-12--12--12-12-12-10--10-10--10-10-10-10----|
E|----------------------------------------------------|
   ↓ ↑ ↓ ↑  ↓   ↓   ↓  ↑  ↓  ↑   ↑  ↓   ↓  ↑  ↓  ↑</span></span>

<span class="tablatura">Parte 6 de 6
<span class="cnt">E|----------------------------------------------------|
B|----------------------------------------------------|
G|-5--------------------------------------------------|
D|----------------------------------------------------|
A|-3--------------------------------------------------|
E|----------------------------------------------------|
   ↓</span></span>

[Terceira Parte]

<span class="tablatura">[Tab - Terceira Parte]

Parte 1 de 2
<span class="cnt">E|-----0--------3--------1----------------------------|
B|---1--------1--------1------------------------------|
G|-2--------0--------0--------------------------------| (3x)
D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

<span class="tablatura">Parte 2 de 2
<span class="cnt">E|-----0--------3----1-1-1...-------------------------|
B|---1--------1------1-1-1...-------------------------|
G|-2--------0-----------------------------------------|
D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

<b>A5</b>  <b>F5</b>                        <b>C5</b>
       Volto o relógio para trás
         <b>G5</b>          <b>A5</b>  <b>F5</b>
Tentando adiar o fim
                     <b>C5</b>            <b>G5</b>
Tentando esconder o medo de te perder
                      <b>A5</b>  <b>F5</b>
Quando me sinto assim

             <b>C5</b>
De olhos fechados 
              <b>G5</b>          <b>A5</b>  <b>F5</b>
Eu tento enganar meu coração
              <b>C5</b>
Fugir pra outro lugar 
       <b>G5</b>                 <b>C5</b>
Em uma outra direção porque

[Refrão]

                    <b>G5</b>
Quando estou com você
           <b>F5</b>       <b>C5</b>
Sinto meu mundo acabar
                          <b>G5</b>
Perco o chão sob os meus pés
                        <b>C5</b>
Me falta o ar pra respirar

            <b>G5</b>
E só de pensar 
                       <b>F5</b>
Em te perder por um segundo
           <b>G5</b>
Eu sei que isso é o fim do mundo

                    <b>G5</b>
Quando estou com você
           <b>F5</b>       <b>C5</b>
Sinto meu mundo acabar
                          <b>G5</b>
Perco o chão sob os meus pés
                        <b>C5</b>
Me falta o ar pra respirar

            <b>G5</b>
E só de pensar 
                       <b>F5</b>
Em te perder por um segundo
           <b>G5</b>
Eu sei que isso é o fim do mundo

[Segundo Solo] <b>C5</b>  <b>G5</b>  <b>A5</b>

<span class="tablatura">Parte 1 de 7
<span class="cnt">E|----------------------------------------------------|
B|----------------------------------------------------|
G|-5--5--5-5-5-5--5-5--5-5-5-5-9--9--9-9-9-7--7-7-----|
D|----------------------------------------------------|
A|-3--3--3-3-3-3--3-3--3-3-3-3-7--7--7-7-7-5--5-5-----|
E|----------------------------------------------------|
   ↓  ↓  ↓ ↑ ↓ ↑  ↑ ↓  ↓ ↑ ↓ ↑ ↓  ↓  ↓ ↑ ↓ ↑  ↑ ↓</span></span>

<span class="tablatura">Parte 2 de 7
<span class="cnt">E|----------------------------------------------------|
B|----------------------------------------------------|
G|-7-7-7-7-14--14--14-14-14-12--12-12--12-12-12-12----|
D|----------------------------------------------------|
A|-5-5-5-5-12--12--12-12-12-10--10-10--10-10-10-10----|
E|----------------------------------------------------|
   ↓ ↑ ↓ ↑  ↓   ↓   ↓  ↑  ↓  ↑   ↑  ↓   ↓  ↑  ↓  ↑</span></span>

<span class="tablatura">Parte 3 de 7
<span class="cnt">E|----------------------------------------------------|
B|----------------------------------------------------|
G|-17--17--17-17-17-16--16-16--16-16-16-16------------|
D|----------------------------------------------------|
A|-15--15--15-15-15-14--14-14--14-14-14-14------------|
E|----------------------------------------------------|
    ↓   ↓   ↓  ↑  ↓  ↑   ↑  ↓   ↓  ↑  ↓  ↑</span></span>

<span class="tablatura">Parte 4 de 7
<span class="cnt">E|----------------------------------------------------|
B|----------------------------------------------------|
G|-17--17--17-17-17-17--17-17--17-17-17-17------------|
D|----------------------------------------------------|
A|-15--15--15-15-15-15--15-15--15-15-15-15------------|
E|----------------------------------------------------|
    ↓   ↓   ↓  ↑  ↓  ↑   ↑  ↓   ↓  ↑  ↓  ↑</span></span>

<span class="tablatura">Parte 5 de 7
<span class="cnt">E|----------------------------------------------------|
B|----------------------------------------------------|
G|-16--16--16-16-16-14--14-14--14-14-14-14------------|
D|----------------------------------------------------|
A|-14--14--14-14-14-12--12-12--12-12-12-12------------|
E|----------------------------------------------------|
    ↓   ↓   ↓  ↑  ↓  ↑   ↑  ↓   ↓  ↑  ↓  ↑</span></span>

<span class="tablatura">Parte 6 de 7
<span class="cnt">E|----------------------------------------------------|
B|----------------------------------------------------|
G|-12--12--12-12-12-10--10-10--10-10-10-10------------|
D|----------------------------------------------------|
A|-10--10--10-10-10--8---8--8---8--8--8--8------------|
E|----------------------------------------------------|
    ↓   ↓   ↓  ↑  ↓  ↑   ↑  ↓   ↓  ↑  ↓  ↑</span></span>

<span class="tablatura">Parte 7 de 7
<span class="cnt">E|----------------------------------------------------|
B|----------------------------------------------------|
G|-5--------------------------------------------------|
D|----------------------------------------------------|
A|-3--------------------------------------------------|
E|----------------------------------------------------|
   ↓</span></span>

[Final]

           <b>F5</b>
Eu sei que isso 
               <b>C5</b>  <b>G5</b>  <b>A5</b>
É o fim do mundo
           <b>F5</b>
Eu sei que isso é o fim

Eu sei que isso é o fim
                               <b>C5</b>
Eu sei que isso é o fim do mundo

----------------- Acordes -----------------
A5 = X 0 P2 2 X X
C5 = X 3 5 5 X X
F5 = 1 3 3 X X X
G5 = 3 5 5 X X X`;

const [title, ...restOfCifra] = cifra.split("\n\n");
const chordsSectionIndex = restOfCifra.findIndex((line) =>
  line.includes("----------------- Acordes -----------------")
);
const mainCifra = restOfCifra.slice(0, chordsSectionIndex).join("\n\n");
const chords = restOfCifra.slice(chordsSectionIndex).join("\n\n");

export default function UmMinutoParaOFimDoMundoPage() {

    // Convert HTML to structured data
  const cifraStructure = convertToStructure(
    mainCifra || "",
    title || "",
    "https://www.cifraclub.com.br/cpm-22/um-minuto-para-fim-do-mundo/"
  );

  return (
    <>
      <CifraDisplay
        title={title || ""}
        cifraData={cifraStructure}
        // Fallback to old format if needed
        mainCifra={mainCifra || ""}
        chords={chords || ""}
      />
      <FloatingMenu />
    </>
  );
}
