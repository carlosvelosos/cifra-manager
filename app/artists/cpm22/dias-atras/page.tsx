import CifraDisplay from "@/components/cifra-display";
import FloatingMenu from "@/components/floating-menu";
import { convertToStructure } from "@/lib/parsers/cifra-converter";

// URL: https://www.cifraclub.com.br/cpm-22/dias-atras/

const cifra = `CPM 22 - Dias Atrás

[Intro] <b>B5</b>  <b>F#5</b>  <b>E5</b>  <b>F#5</b>
        <b>B5</b>  <b>F#5</b>  <b>E5</b>  <b>F#5</b>

<span class="tablatura">[Tab - Intro]

Parte 1 a 4 de 8
<span class="cnt">E|----------------------------------------------------|
B|-12-12-12-11-11-11-11-11-12-12-12-11-11-11-11-11----|
G|-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11----| (4x)
D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

<span class="tablatura">Parte 5 a 6 de 8
<span class="cnt">E|----------------------------------------------------|
B|-14-14-14-12-12-12-12-12-14-14-14-12-12-12-12-12----|
G|-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11----| (2x)
D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

<span class="tablatura">Parte 7 de 8 
<span class="cnt">E|----------------------------------------------------|
B|-12-12-12-11-11-11-11-11-12-12-12-11-11-11-11-11----|
G|-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11----|
D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

<span class="tablatura">Parte 8 de 8
<span class="cnt">E|----------------------------------------------------|
B|-12-12-12-11-11-11-11-11-12-12-12-11-11-11-11-------|</span></span>
<span class="tablatura"><b>G</b>|-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11\\4~~|
<span class="cnt">D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

[Primeira Parte]

<span class="tablatura">[Tab - Riff da Primeira Parte]

<span class="cnt">E|---2---------2--------------------------------------|
B|-0---------0----------------------------------------|
G|--------1-------------------------------------------| (6x)
D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

<span class="tablatura"><span class="cnt">E|----2---------2-------------------------------------|
B|----------------------------------------------------|
G|-4---------3----------------------------------------| (3x)
D|---------4------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

( <b>E5</b>  <b>G#m7</b>  <b>E5</b>  <b>G#m7</b> )

 <b>E5</b>    <b>G#m7</b>
Nunca mais
   <b>E5</b>            <b>G#m7</b>
Espero te encontrar
     <b>E5</b>  <b>G#m7</b>
Por tudo
       <b>E5</b>           <b>G#m7</b>  <b>E5</b>
Que você me fez passar
        <b>G#m7</b>          <b>E5</b>
Tantos dias sem entender
     <b>G#m7</b>        <b>E5</b>  <b>G#m7</b>
Esperando por você
                <b>F#5</b>  <b>E5</b>
Que não vai voltar

[Refrão]

<span class="tablatura">[Tab - Refrão]

Parte 1 de 8
<span class="cnt">E|----------------------------------------------------|
B|-12-12-12-12-12-12-12-12-12-12-12-12-12-12-12-12----|
G|-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11----|
D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

<span class="tablatura">Parte 2 a 4 de 8
<span class="cnt">E|----------------------------------------------------|
B|-12-12-12-12-12-12-12-12-11-11-11-12-12-12-12-12----|
G|-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11----| (3x)
D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

<span class="tablatura">Parte 5 a 6 de 8
<span class="cnt">E|----------------------------------------------------|
B|-14-14-14-12-12-12-12-12-14-14-14-12-12-12-12-12----|
G|-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11----| (2x)
D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

<span class="tablatura">Parte 7 de 8
<span class="cnt">E|----------------------------------------------------|
B|-12-12-12-11-11-11-11-11-12-12-12-11-11-11-11-11----|
G|-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11----|
D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

<span class="tablatura">Parte 8 de 8
<span class="cnt">E|----------------------------------------------------|
B|-12-12-12-12-12-12-12-12-12-12-12-12-12-12-12-------|</span></span>
<span class="tablatura"><b>G</b>|-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11-11\\9~~|
<span class="cnt">D|----------------------------------------------------|
A|----------------------------------------------------|
E|----------------------------------------------------|</span></span>

<b>B5</b>         <b>F#5</b>
   Dias atrás
    <b>E5</b>
Pensava em você
    <b>F#5</b>         <b>B5</b>
Não era assim, mas
           <b>F#5</b>
Olho pra trás
     <b>E5</b>
Mas penso e sigo em frente
     <b>F#5</b>
Pra nunca mais

Viver assim

[Segunda Parte]

( <b>E5</b>  <b>G#m7</b>  <b>E5</b>  <b>G#m7</b> )

 <b>E5</b>    <b>G#m7</b>
Tanto faz
<b>E5</b>           <b>G#m7</b>
O que vai rolar
     <b>E5</b>   <b>G#m7</b>
Mas nunca
   <b>E5</b>          <b>G#m7</b>  <b>E5</b>
Espero voltar lá
        <b>G#m7</b>          <b>E5</b>
Sempre tento me esconder
      <b>G#m7</b>         <b>E5</b>  <b>G#m7</b>
Para deixar de te ver
               <b>F#5</b>  <b>E5</b>
Acho que é melhor

[Refrão]

<b>B5</b>         <b>F#5</b>
   Dias atrás
    <b>E5</b>
Pensava em você
    <b>F#5</b>      <b>B5</b>
Não é assim mais
           <b>F#5</b>
Olho pra trás
     <b>E5</b>
Mas penso e sigo em frente
     <b>F#5</b>
Pra nunca mais

Viver assim

[Solo] <b>G#5</b>  <b>E5</b>  <b>G#5</b>  <b>E5</b>  
       <b>G#5</b>  <b>E5</b>  <b>F#5</b>  <b>E5</b>
       <b>G#5</b>  <b>E5</b>  <b>G#5</b>  <b>E5</b>  <b>G#5</b>
       <b>F#5</b>  <b>E5</b>  <b>F#5</b>  <b>E5</b>

<span class="tablatura">Parte 1 de 4
<span class="cnt">E|-----------------------------------------------------|
B|-----------------------------------------------------|
G|-----------------------------------------------------| (2x)
D|-4h6--6--6-6-6-4h6--6-6-6-6-6-6-6--------------------|
A|-----------------------------------------------------|
E|-----------------------------------------------------|</span></span>

<span class="tablatura">Parte 2 de 4
<span class="cnt">E|-----------------------------------------------------|
B|-----------------------------------------------------|
G|-----------4---4--4-4-4-4-4-6-4-6b8---b8---b8r6--6--4|
D|-4h6--6--6---6---------------------------------------|
A|-----------------------------------------------------|
E|-----------------------------------------------------|</span></span>

<span class="tablatura"><span class="cnt">E|-----------------------------------------------------|
B|-----------------------------------------------------|
G|-4-4-4-4-4-4-4---------------------------------------|
D|-----------------------------------------------------|
A|-----------------------------------------------------|
E|-----------------------------------------------------|</span></span>

<span class="tablatura">Parte 3 de 4
<span class="cnt">E|-----------------------------------------------------|
B|-/7--7--7-7-7-7/9--9-9-9-9-9-9-9-9/11--11--11-11-11--|
G|-----------------------------------------------------|
D|-----------------------------------------------------|
A|-----------------------------------------------------|
E|-----------------------------------------------------|</span></span>

<span class="tablatura"><span class="cnt">E|-----------------------------------------------------|
B|-11/12--12-12-12-12-11-9--9h11--11--11--9\\7--7-------|
G|-----------------------------------------------------|
D|-----------------------------------------------------|
A|-----------------------------------------------------|
E|-----------------------------------------------------|</span></span>

<span class="tablatura"><span class="cnt">E|-----------------------------------------------------|
B|-7-7-7-7-7-7\----------------------------------------|
G|-----------------------------------------------------|
D|-----------------------------------------------------|
A|-----------------------------------------------------|
E|-----------------------------------------------------|</span></span>

<span class="tablatura">Parte 4 de 4
<span class="cnt">E|-----------------------------------------------------|
B|-/7--7--7-7-7-7----5-5-5| 5-5-5-5\--------------------|
G|-----------------------------------------------------|
D|-----------------------------------------------------|
A|-----------------------------------------------------|
E|-----------------------------------------------------|</span></span>

<span class="tablatura"><span class="cnt">E|-----------------------------------------------------|
B|-/7--7--7-7-7-7----5-5-5-----------------------------|
G|-----------------------------------------------------|
D|-------------------------x-x-x-x---------------------|
A|-------------------------x-x-x-x---------------------|
E|-------------------------x-x-x-x---------------------|</span></span>

[Refrão]

<b>B5</b>         <b>F#5</b>
   Dias atrás
    <b>E5</b>
Pensava em você
    <b>F#5</b>         <b>B5</b>
Não era assim, mas
           <b>F#5</b>
Olho pra trás
     <b>E5</b>
Mas penso e sigo em frente
     <b>F#5</b>
Pra nunca mais

[Final]

         <b>B5</b>
Viver assim (viver assim)
         <b>F#5</b>
Viver assim (viver assim)
         <b>E5</b>
Viver assim
     <b>F#5</b>
Pra nunca mais
         <b>B5</b>
Viver assim (viver assim)
         <b>F#5</b>
Viver assim (viver assim)
         <b>E5</b>
Viver assim
     <b>F#5</b>
Pra nunca mais viver assim

( <b>E5</b>  <b>G#m7</b>  <b>E5</b>  <b>G#m7</b> )
( <b>E5</b>  <b>G#m7</b>  <b>E5</b>  <b>G#m7</b> )
( <b>E5</b> )

----------------- Acordes -----------------
B5 = X 2 4 4 X X
E5 = 0 P2 2 X X X
F#5 = 2 4 4 X X X
G = 3 2 0 0 0 3
G#5 = 4 6 6 X X X
G#m7 = 4 2 4 X X X`;

const [title, ...restOfCifra] = cifra.split("\n\n");
const chordsSectionIndex = restOfCifra.findIndex((line) =>
  line.includes("----------------- Acordes -----------------")
);
const mainCifra = restOfCifra.slice(0, chordsSectionIndex).join("\n\n");
const chords = restOfCifra.slice(chordsSectionIndex).join("\n\n");

export default function DiasAtrasPage() {
  // Convert HTML to structured data
  const cifraStructure = convertToStructure(
    mainCifra || "",
    title || "",
    "https://www.cifraclub.com.br/cpm-22/dias-atras/"
  );

  return (
    <>
      <CifraDisplay
        title={title || ""}
        cifraData={cifraStructure}
        // Fallback to old format if needed
        mainCifra={mainCifra || ""}
        chords={chords || ""}
      />
      <FloatingMenu />
    </>
  );
}
