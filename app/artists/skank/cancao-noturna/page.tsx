import CifraDisplay from "@/components/cifra-display";
import FloatingMenu from "@/components/floating-menu";
import { convertToStructure } from "@/lib/parsers/cifra-converter";
// URL: https://www.cifraclub.com.br/skank/cancao-noturna/

const cifra = `Skank - Canção Noturna

[Intro] <b>Am</b>  <b>G</b>  <b>Am</b>  <b>G</b>
        <b>Am</b>  <b>G</b>  <b>Am</b>  <b>G</b>

[Solo 1]

Parte 1 De 3

<span class="tablatura"><span class="cnt">E|------------------------------------------|
B|------------------------------------------|
G|-6h8-8-8-8-8--6-6h8-8-8-8-8--6h8-6-5------|
D|------------------------------------------|
A|------------------------------------------|
E|------------------------------------------|</span></span>

Parte 2 De 3

<span class="tablatura"><span class="cnt">E|------------------------------------------|
B|------------------------------------------|
G|-6h8-8-8-8-8--6h8-8-8-8-8-8--8b10r8-6\\5---|
D|------------------------------------------|
A|------------------------------------------|
E|------------------------------------------|</span></span>

Parte 3 De 3

<span class="tablatura"><span class="cnt">E|------6-----------------4-----------------|
B|--------------------------1h2-1-----------|
G|-8b10---6-6/8\\6-6-6b8r6-------------------|
D|------------------------------------------|
A|------------------------------------------|
E|------------------------------------------|</span></span>

[Primeira Parte]

<b>Am</b>
   Misterioso luar de fronteira

Derramando no espinhaço quase um mar
<b>G</b>
  Clareando a aduana
      <b>Am</b>
Venezuela donde estás
                           <b>C</b>                  <b>G</b>
Não sei por que nessas esquinas vejo o seu olhar

         <b>Am</b>
Minha camisa estampada com o rosto de Elvis
<b>G</b>                             <b>Am</b>
  A minha guitarra é minha razão

Minha sorte anunciada misteriosamente
   <b>G</b>
A lua sobre nada

[Refrão]

              <b>Am</b>           <b>C</b>                  <b>G</b>
Não sei por que nessas esquinas vejo o seu olhar
              <b>Am</b>           <b>C</b>                  <b>G</b>
Não sei por que nessas esquinas vejo o seu olhar
   <b>Dm</b>                                <b>C</b>
Espalhe por aí boatos de que eu ficarei aqui
   <b>Dm</b>                                <b>C</b>
Espalhe por aí boatos de que eu ficarei aqui

[Solo 2] <b>Am</b>  <b>G</b>

<span class="tablatura">  <b>Am</b>              <b>G</b>
<span class="cnt">E|---1-1------------------------------------|
B|-2-----4-4/6-6~----1-1-1-1-1h2-1----------|
G|-3---------------1---------------1--------|
D|-3---------------1------------------------|
A|-1---------------3------------------------|
E|-----------------4------------------------|</span></span>

[Segunda Parte]

         <b>Am</b>
Vem mamacita doida e meiga
                    <b>G</b>
Sempre o âmago dos fatos
                             <b>Am</b>
Minha guerra e as flores do cactos
                     <b>G</b>
Poema, cinema, trincheira
              <b>Am</b>           <b>C</b>                  <b>G</b>
Não sei por que nessas esquinas vejo o seu olhar

    <b>Am</b>                             <b>G</b>
Um cego na fronteira, filósofo da zona
                        <b>Am</b>
Me disse que era um dervixe
                      <b>G</b>
Eu disse pra ele camarada
                                         <b>Am</b>   <b>G</b>
Eu acredito em tanta coisa que não vale nada

[Refrão]

              <b>Am</b>           <b>C</b>                  <b>G</b>
Não sei por que nessas esquinas vejo o seu olhar
              <b>Am</b>           <b>C</b>                  <b>G</b>
Não sei por que nessas esquinas vejo o seu olhar
   <b>Dm</b>                                <b>C</b>
Espalhe por aí boatos de que eu ficarei aqui
   <b>Dm</b>                                <b>C</b>
Espalhe por aí boatos de que eu ficarei aqui

[Solo 3] <b>Am</b>  <b>G</b>  <b>Am</b>  <b>G</b>  <b>F7M</b>  <b>G</b>

Parte 1 De 4

<span class="tablatura">  <b>Am</b>                 <b>G</b>
<span class="cnt">E|----1-1-----------------------------------|
B|-2------4-4/6-6-6~----1-1-1-1-1h2-1-------|
G|-3------------------1---------------1-----|
D|-3------------------1---------------------|
A|-1------------------3---------------------|
E|--------------------4---------------------|</span></span>

Parte 2 De 4

<span class="tablatura"><span class="cnt">E|----1-1-----------------------------------|
B|-2------4-4/6-6-6~----1-1-1-1-1h2-1-------|
G|-3------------------1---------------1-----|
D|-3------------------1---------------------|
A|-1------------------3---------------------|
E|--------------------4---------------------|</span></span>

Parte 3 De 4

<span class="tablatura"><span class="cnt">E|---1-----4-----1-----1-----1--------------|
B|-----2-----2-----2-----2-----2------------|
G|-3-----3-----3-----3-----3-----3-3/5------|
D|------------------------------------------|
A|------------------------------------------|
E|------------------------------------------|</span></span>

Parte 4 De 4

<span class="tablatura"><span class="cnt">E|-1-----1-----1-----1-----1----------------|
B|---4-----4-----4-----4-----4--------------|
G|-----5-----5-----5-----5-----5------------|
D|------------------------------------------|
A|------------------------------------------|
E|------------------------------------------|</span></span>

[Refrão Final]

              <b>Am</b>           <b>C</b>                  <b>G</b>
Não sei por que nessas esquinas vejo o seu olhar
              <b>Am</b>           <b>C</b>                  <b>G</b>
Não sei por que nessas esquinas vejo o seu olhar

Velejando, viajando, sol quarando
        <b>Am</b>                    <b>C</b>
Meu querer, meu dever, meu devir
               <b>G</b>
E eu aqui a comer poeira

Que o sol deixará

              <b>Am</b>           <b>C</b>                  <b>G</b>
Não sei por que nessas esquinas vejo o seu olhar
              <b>Am</b>           <b>C</b>                  <b>G</b>
Não sei por que nessas esquinas vejo o seu olhar

[Final] <b>Am</b>  <b>C</b>  <b>G</b>  
        <b>Am</b>  <b>C</b>  <b>G</b>  
        <b>Am</b>  <b>C</b>  <b>G</b>

----------------- Acordes -----------------
Capotraste na 1ª casa
A#m*  = X 0 2 2 1 0 - (*Bm na forma de A#m)
C#*  = X 3 2 0 1 0 - (*D na forma de C#)
D#m*  = X X 0 2 3 1 - (*Em na forma de D#m)
F#7M*  = 1 X 2 2 1 X - (*G7M na forma de F#7M)
G#*  = 3 2 0 0 0 3 - (*A na forma de G#)`;


const [title, ...restOfCifra] = cifra.split("\n\n");
const chordsSectionIndex = restOfCifra.findIndex((line) =>
  line.includes("----------------- Acordes -----------------")
);
const mainCifra = restOfCifra.slice(0, chordsSectionIndex).join("\n\n");
const chords = restOfCifra.slice(chordsSectionIndex).join("\n\n");

export default function CancaoNoturnaPage() {

    // Convert HTML to structured data
  const cifraStructure = convertToStructure(
    mainCifra || "",
    title || "",
    "https://www.cifraclub.com.br/skank/cancao-noturna/"
  );

  return (
    <>
      <CifraDisplay
        title={title || ""}
        cifraData={cifraStructure}
        // Fallback to old format if needed
        mainCifra={mainCifra || ""}
        chords={chords || ""}
      />
      <FloatingMenu />
    </>
  );
}
