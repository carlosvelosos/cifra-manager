import CifraDisplay from "@/components/cifra-display";
import FloatingMenu from "@/components/floating-menu";
import { convertToStructure } from "@/lib/parsers/cifra-converter";
// URL: https://www.cifraclub.com.br/o-rappa/minha-alma/

const cifra = `O Rappa - Minha Alma

Primeira Parte:

A minha alma tá armada e apontada 
           <b>Am</b>
Para cara do sossego
                   <b>F</b>          <b>Dm</b>
Pois paz sem voz, paz sem voz
              <b>Am</b>
Não é paz, é medo

Segunda parte:

Às vezes eu falo com a vida

Às vezes é ela quem diz
        <b>F</b>                          <b>Dm</b>
Qual a paz que eu não quero conservar
                  <b>Am</b>
Pra tentar ser feliz


Às vezes eu falo com a vida

Às vezes é ela quem diz
        <b>F</b>                          <b>Dm</b>
Qual a paz que eu não quero conservar
                  <b>Am</b>
Pra tentar ser feliz

Primeira Parte:

A minha alma tá armada e apontada 

Para cara do sossego
                   <b>F</b>          <b>Dm</b>
Pois paz sem voz, paz sem voz
              <b>Am</b>
Não é paz, é medo

Segunda parte:

Às vezes eu falo com a vida

Às vezes é ela quem diz
        <b>F</b>                          <b>Dm</b>
Qual a paz que eu não quero conservar
                  <b>Am</b>
Pra tentar ser feliz


Às vezes eu falo com a vida

Às vezes é ela quem diz
        <b>F</b>                          <b>Dm</b>
Qual a paz que eu não quero conservar
                  <b>Am</b>
Pra tentar ser feliz

Refrão:

       <b>Am7</b>
As grades do condomínio
          <b>G6/A</b>       <b>Am</b>
São pra trazer proteção
        <b>Am7</b>
Mas também trazem a dúvida
        <b>G6/A</b>             <b>Dm9/A</b>
Se é você que tá nessa prisão

      <b>Am7</b>             <b>G6/A</b>
Me abrace e me dê um beijo
 <b>Dm9/A</b>           <b>Am</b>
Faça um filho comigo
            <b>Am7</b>                 <b>G6/A</b>
Mas não me deixe sentar na poltrona
             <b>Am</b>
No dia de domingo

      <b>Am7</b>                <b>G6/A</b>
Procurando novas drogas de aluguel
       <b>Dm9/A</b>    <b>Am</b>
Nesse vídeo coagido
        <b>Am7</b>                  <b>G6/A</b>
É pela paz que eu não quero seguir 
     <b>Am</b>
Admitindo

Segunda parte:

Às vezes eu falo com a vida

Às vezes é ela quem diz
        <b>F</b>                          <b>Dm</b>
Qual a paz que eu não quero conservar
                  <b>Am</b>
Pra tentar ser feliz


Às vezes eu falo com a vida

Às vezes é ela quem diz
        <b>F</b>                          <b>Dm</b>
Qual a paz que eu não quero conservar
                  <b>Am</b>
Pra tentar ser feliz

Refrão:

       <b>Am7</b>
As grades do condomínio
          <b>G6/A</b>       <b>Am</b>
São pra trazer proteção
        <b>Am7</b>
Mas também trazem a dúvida
        <b>G6/A</b>             <b>Dm9/A</b>
Se é você que tá nessa prisão

      <b>Am7</b>             <b>G6/A</b>
Me abrace e me dê um beijo
 <b>Dm9/A</b>           <b>Am</b>
Faça um filho comigo
            <b>Am7</b>                 <b>G6/A</b>
Mas não me deixe sentar na poltrona
             <b>Am</b>
No dia de domingo

      <b>Am7</b>                <b>G6/A</b>
Procurando novas drogas de aluguel
       <b>Dm9/A</b>    <b>Am</b>
Nesse vídeo coagido
        <b>Am7</b>                  <b>G6/A</b>
É pela paz que eu não quero seguir 
     <b>Am</b>
Admitindo

      <b>Am7</b>                <b>G6/A</b>
Procurando novas drogas de aluguel
       <b>Dm9/A</b>    <b>Am</b>
Nesse vídeo coagido
        <b>Am7</b>                  <b>G6/A</b>
É pela paz que eu não quero seguir 
     <b>Am</b>
Admitindo

      <b>Am7</b>             <b>G6/A</b>
Me abrace e me dê um beijo
 <b>Dm9/A</b>           <b>Am</b>
Faça um filho comigo
            <b>Am7</b>                 <b>G6/A</b>
Mas não me deixe sentar na poltrona
             <b>Am</b>
No dia de domingo

      <b>Am7</b>                <b>G6/A</b>
Procurando novas drogas de aluguel
       <b>Dm9/A</b>    <b>Am</b>
Nesse vídeo coagido
        <b>Am7</b>                  <b>G6/A</b>
É pela paz que eu não quero seguir 
     <b>Am</b>
Admitindo

      <b>Am7</b>                <b>G6/A</b>
Procurando novas drogas de aluguel
       <b>Dm9/A</b>    <b>Am</b>
Nesse vídeo coagido
        <b>Am7</b>                  <b>G6/A</b>
É pela paz que eu não quero seguir 
     <b>Am</b>
Admitindo

        <b>Am7</b>                  <b>G6/A</b>
É pela paz que eu não quero seguir 
        <b>Dm9/A</b>                <b>Am</b>
É pela paz que eu não quero seguir 
        <b>Am7</b>                  <b>G6/A</b>
É pela paz que eu não quero seguir 
     <b>Am</b>
Admitindo

        <b>Am7</b>                  <b>G6/A</b>
É pela paz que eu não quero seguir 
        <b>Dm9/A</b>                <b>Am</b>
É pela paz que eu não quero seguir 
        <b>Am7</b>                  <b>G6/A</b>
É pela paz que eu não quero seguir 
     <b>Am</b>
Admitindo

----------------- Acordes -----------------
Am = X 0 2 2 1 0
Am7 = X 0 5 5 5 0
Dm = X X 0 2 3 1
Dm9/A = X 0 7 7 6 0
F = 1 3 3 2 1 1
G6/A = X 0 5 4 3 0`;


const [title, ...restOfCifra] = cifra.split("\n\n");
const chordsSectionIndex = restOfCifra.findIndex((line) =>
  line.includes("----------------- Acordes -----------------")
);
const mainCifra = restOfCifra.slice(0, chordsSectionIndex).join("\n\n");
const chords = restOfCifra.slice(chordsSectionIndex).join("\n\n");

export default function MinhaAlmaPage() {

    // Convert HTML to structured data
  const cifraStructure = convertToStructure(
    mainCifra || "",
    title || "",
    "https://www.cifraclub.com.br/o-rappa/minha-alma/"
  );

  return (
    <>
      <CifraDisplay
        title={title || ""}
        cifraData={cifraStructure}
        // Fallback to old format if needed
        mainCifra={mainCifra || ""}
        chords={chords || ""}
      />
      <FloatingMenu />
    </>
  );
}
