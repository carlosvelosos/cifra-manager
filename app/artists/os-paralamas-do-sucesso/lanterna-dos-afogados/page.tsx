import CifraDisplay from "@/components/cifra-display";
import FloatingMenu from "@/components/floating-menu";
import { convertToStructure } from "@/lib/parsers/cifra-converter";
// URL: https://www.cifraclub.com.br/os-paralamas-do-sucesso/lanterna-dos-afogados/

const cifra = `Os Paralamas do Sucesso - Lanterna Dos Afogados

[Intro] <b>B9</b>  <b>B9(11+)</b>  <b>A#m</b>  <b>D#m7</b>  
        <b>B9</b>  <b>B9(11+)</b>  <b>A#m</b>  <b>D#m7</b> 
        <b>B9</b>  <b>B9(11+)</b>  <b>A#m</b>  <b>D#m7</b>   
        <b>E9</b>

<span class="tablatura">[Tab - Intro]

   <b>B9</b>       <b>B9(11+)</b>  <b>A#m</b>      <b>D#m7</b>
<span class="cnt">E|----------------------------------6-------|
B|-----7--------6--------6----------7-------|
G|---6--------6--------6----------6---------|
D|-9--------9--------8----------8-----------|
A|----------------------------6-------------|
E|------------------------------------------|</span></span>

<span class="tablatura">   <b>E9</b>
<span class="cnt">E|-7----7-----------------------------------|
B|-7----7-----------------------------------|
G|-9----9-----------------------------------|
D|-9----9-----------------------------------|
A|-7----7-----------------------------------|
E|-0----0-----------------------------------|
   ↓    ↑</span></span>

[Primeira Parte]

             <b>B9</b>
Quando tá escuro
             <b>B9(11+)</b>
E ninguém te ouve
                <b>A#m</b>
Quando chega a noite
        <b>D#m7</b>
E você pode chorar
               <b>B9</b>
Há uma luz no túnel
            <b>B9(11+)</b>
Dos desesperados
               <b>A#m</b>
Há um cais de porto
             <b>D#m7</b>
Pra quem precisa chegar
             <b>B9</b>
Eu tô na lanterna
        <b>B9(11+)</b>
Dos afogados
              <b>A#m</b>
Eu tô te esperando
           <b>D#m7</b>       <b>E9</b>
Vê se não vai demorar

[Segunda Parte]

           <b>B9</b>
Uma noite longa
              <b>B9(11+)</b>
Pra uma vida curta
                 <b>A#m</b>
Mas já não me importa
         <b>D#m7</b>
Basta poder te ajudar
              <b>B9</b>
E são tantas marcas
              <b>B9(11+)</b>
Que já fazem parte
                <b>A#m</b>
Do que eu sou agora
           <b>D#m7</b>
Mas ainda sei me virar
             <b>B9</b>
Eu tô na lanterna
        <b>B9(11+)</b>
Dos afogados
              <b>A#m</b>
Eu tô te esperando
           <b>D#m7</b>       <b>E9</b>
Vê se não vai demorar

[Solo] <b>B5</b>  <b>C#5/G#</b>  <b>B5</b>  <b>C#5/G#</b>
       <b>A#5</b>  <b>B5</b>  <b>F#5</b>

[Terceira Parte]

           <b>B9</b>
Uma noite longa
              <b>B9(11+)</b>
Pra uma vida curta
                 <b>A#m</b>
Mas já não me importa
         <b>D#m7</b>
Basta poder te ajudar
             <b>B9</b>
Eu tô na lanterna
        <b>B9(11+)</b>
Dos afogados
              <b>A#m</b>  <b>D#m7</b>
Eu tô te esperando

[Solo] <b>B9</b>  <b>B9(11+)</b>  <b>A#m</b>  <b>D#m7</b>  
       <b>B9</b>  <b>B9(11+)</b>  <b>A#m</b>  <b>D#m7</b> 
       <b>B9</b>  <b>B9(11+)</b>  <b>A#m</b>  <b>D#m7</b> 
       <b>B9</b>  <b>B9(11+)</b>  <b>A#m</b>  <b>D#m7</b> 
       <b>B9</b>  <b>B9(11+)</b>  <b>A#m</b>  <b>D#m7</b> 
       <b>B9</b>  <b>B9(11+)</b>  <b>A#m</b>  <b>D#m7</b> 

<span class="tablatura">[Tab - Solo]

Parte 1 de 4
<span class="cnt">E|-----------------------------------------------------|
B|-14--------------------14----------------------------|
G|-13b15r13p11--13b15~------13b15r13~---13b15r13p11----|
D|-----------------------------------------------------|
A|--------------------------------------------------13~|
E|-----------------------------------------------------|</span></span>

<span class="tablatura">Parte 2 de 4
<span class="cnt">E|-------------------------14--------------------------|
B|------------------14b16-----14b16r14p11--14-14b16r14-|
G|-----11---10~----------------------------------------|
D|-----------------------------------------------------|
A|-/13----x--------------------------------------------|
E|-----------------------------------------------------|</span></span>

<span class="tablatura"><span class="cnt">E|-11-------13~---11-------14~------14----13~---11-----|
B|----14-11----------14-11-------11----11----------14--|
G|-----------------------------------------------------|
D|-----------------------------------------------------|
A|-----------------------------------------------------|
E|-----------------------------------------------------|</span></span>

<span class="tablatura">Parte 3 de 4
<span class="cnt">E|---------11-----------11-----------11----------------|
B|-b16r-------14b16r-------14b16r-------14b16r---------|
G|-----------------------------------------------------|
D|-----------------------------------------------------|
A|-----------------------------------------------------|
E|-----------------------------------------------------|</span></span>

<span class="tablatura"><span class="cnt">E|-11--------------------------------------------------|
B|----14b16---b16-b16-b16r-b15r--b16r--b16r--b16r--b16r|
G|-----------------------------------------------------|
D|-----------------------------------------------------|
A|-----------------------------------------------------|
E|-----------------------------------------------------|</span></span>

<span class="tablatura"><span class="cnt">E|--------------------------14-------------------------|
B|-b16r--b16r--b16r--b16-------14b16--14~--------------|
G|-----------------------------------------------------|
D|-----------------------------------------------------|
A|-----------------------------------------------------|
E|-----------------------------------------------------|</span></span>

<span class="tablatura">Parte 4 de 4
<span class="cnt">E|----19b21~---19-18-16--------------------------------|
B|-16-------------------19-16-19----16-19-16~----------|
G|-------------------------------18--------------------|
D|-----------------------------------------------------|
A|-----------------------------------------------------|</span></span>
E|-----------------------------------------------------|

----------------- Acordes -----------------
A#5 = X 1 3 3 X X
A#m = X X 8 P6 6 X
B5 = X 2 4 4 X X
B9 = X X 9 6 7 X
B9(11+) = X X 9 P6 6 X
C#5/G# = X 11 11 X X X
D#m7 = X 6 8 6 7 6
E9 = X 7 9 9 7 7
F#5 = 2 4 4 X X X`;


const [title, ...restOfCifra] = cifra.split("\n\n");
const chordsSectionIndex = restOfCifra.findIndex((line) =>
  line.includes("----------------- Acordes -----------------")
);
const mainCifra = restOfCifra.slice(0, chordsSectionIndex).join("\n\n");
const chords = restOfCifra.slice(chordsSectionIndex).join("\n\n");

export default function LanternaDosAfogadosPage() {

    // Convert HTML to structured data
  const cifraStructure = convertToStructure(
    mainCifra || "",
    title || "",
    "https://www.cifraclub.com.br/os-paralamas-do-sucesso/lanterna-dos-afogados/"
  );

  return (
    <>
      <CifraDisplay
        title={title || ""}
        cifraData={cifraStructure}
        // Fallback to old format if needed
        mainCifra={mainCifra || ""}
        chords={chords || ""}
      />
      <FloatingMenu />
    </>
  );
}
