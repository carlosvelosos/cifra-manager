import CifraDisplay from "@/components/cifra-display";
import FloatingMenu from "@/components/floating-menu";
import { convertToStructure } from "@/lib/parsers/cifra-converter";

// URL: https://www.cifraclub.com.br/detonautas/o-dia-que-nao-terminou/

const cifra = `Detonautas Roque Clube - O Dia Que Não Terminou

[Intro] <b>Am</b>  <b>F7M/C</b>  <b>G6</b>
        <b>Am</b>  <b>F7M/C</b>  <b>G6</b>

<span class="tablatura"><span class="cnt">E|---------------------------------------------------|
B|------10\\8~----------------------------------------|
G|-7/9~-------9\\5-2/7~-7\p0--------------------------|
D|---------------------------------------------------|
A|---------------------------------------------------|
E|---------------------------------------------------|</span></span>

<span class="tablatura"><span class="cnt">E|---------------------------------------------------|
B|------10\\8~----------------------------------------|
G|-7/9~-------9\\5-2/7~-7\p0--------------------------|
D|---------------------------------------------------|
A|---------------------------------------------------|
E|---------------------------------------------------|</span></span>

[Primeira Parte]

          <b>Am</b>               <b>F7M/C</b>
Me sinto tão estranho aqui
                    <b>G6</b>
Que mal posso me mexer irmão
         <b>Am</b>           <b>F7M/C</b>
No meio dessa confusão
                   <b>G6</b>
Não consigo encontrar ninguém
      <b>Am</b>        <b>F7M/C</b>     <b>G6</b>
Onde foi que você se meteu então?
                      <b>F7M/C</b>
Tô tentando te encontrar
                     <b>Am</b>
Tô tentando me entender
    <b>G6</b>
As coisas são assim

[Violão 2]

<span class="tablatura">   <b>Am9/E</b>
<span class="cnt">E|-0-------------------------------------------------|
B|-5----------1---------3-------3--------------------|
G|-5------0---------0-------0------------------------|
D|-7----3---3---3/5---5---5---5----------------------|
A|-7-------------------------------------------------|
E|---------------------------------------------------|</span></span>
<span class="tablatura">                     <b>G</b>
<span class="cnt">E|-------------------3-------------------------------|
B|-------1-------1---3-------------------------------|
G|---0-------0-------0-------------------------------|
D|-3---3---2---2-----0-------------------------------|
A|-------------------2-------------------------------|
E|-------------------3-------------------------------|</span></span>

[Refrão]

 <b>Am</b>                    <b>F7M/C</b>          <b>G</b>
Meus olhos grandes de medo revelam a solução
 <b>Am</b>                 <b>F7M/C</b>             <b>G</b>
Meu coração tem segredos que movem a solidão
A solidão

( <b>Am</b>  <b>F7M/C</b>  <b>G6</b> )

[Violão 2] 

<span class="tablatura"><span class="cnt">E|---------------------------------------------------|
B|------10\\8~----------------------------------------|
G|-7/9~-------9\\5-2/7~-7\p0--------------------------|
D|---------------------------------------------------|
A|---------------------------------------------------|
E|---------------------------------------------------|</span></span>

          <b>Am</b>               <b>F7M/C</b>
Me sinto tão estranho aqui
                <b>G6</b>
Diferente de você irmão
       <b>Am</b>                <b>F7M/C</b>
A sua forma em distorção
                    <b>G6</b>
Não pareço com ninguém sei lá
         <b>Am</b>          <b>F7M/C</b>            <b>G6</b>
Pois eu sei que nós temos o mesmo destino então
                      <b>F7M/C</b>
Tô tentando me encontrar
                     <b>Am</b>
To tentando me entender
      <b>G</b>
Por que tá tudo assim?

<span class="tablatura"><span class="cnt">E|---------------------------------------------------|
B|---10-8-10---10-8-10---10-8-10---10-8-10---10-8-10-|
G|-9---------9---------9---------9---------9---------|
D|---------------------------------------------------|
A|---------------------------------------------------|
E|---------------------------------------------------|</span></span>

<span class="tablatura"><span class="cnt">E|----------------------8-8-7------------------------|
B|---10-8-10---10-8-10--------10-8-------------------|
G|-9---------9---------------------------------------|
D|---------------------------------------------------|
A|---------------------------------------------------|
E|---------------------------------------------------|</span></span>

[Refrão]

 <b>Am</b>                    <b>F7M/C</b>          <b>G</b>
Meus olhos grandes de medo revelam a solução
 <b>Am</b>                 <b>F7M/C</b>             <b>G</b>
Meu coração tem segredos que movem a solidão
A solidão

( <b>Am</b>  <b>F7M/C</b>  <b>G6</b> ) 
( <b>Am</b>  <b>F7M/C</b>  <b>G6</b> ) 

[Violão 2]

<span class="tablatura"><span class="cnt">E|---------------------------------------------------|
B|------10\\8~----------------------------------------|
G|-7/9~-------9\\5-2/7~-7\p0--------------------------|
D|---------------------------------------------------|
A|---------------------------------------------------|
E|---------------------------------------------------|</span></span>

<span class="tablatura"><span class="cnt">E|---------------------------------------------------|
B|------10\\8~----------------------------------------|
G|-7/9~-------9\\5-2/7~-7\p0--------------------------|
D|---------------------------------------------------|
A|---------------------------------------------------|
E|---------------------------------------------------|</span></span>

<b>Am</b>                       <b>F7M/C</b>
   Quem de nós vai insistir e não
<b>Am</b>                       <b>F7M/C</b>
   Se entregar sem resistir então
<b>Am</b>                         <b>F7M/C</b>
   Já não há mais pra onde ir
<b>G</b>                    <b>F7M/C</b>
  Se entregar à solidão e não

<span class="tablatura"><span class="cnt">E|---------------------------------------------------|
B|---------------------------------------------------|
G|---------------------------------------------------|
D|----------------------------------7-7-7-7-7--------|
A|-3-3-3-3-3-3-3-3-3-3-3-3/7-7-7-7--8-8-8-8-8--------|
E|-5-5-5-5-5-5-5-5-5-5-5-5/8-8-8-8-------------------|</span></span>

<span class="tablatura"><span class="cnt">E|-8-7-----------------------------------------------|
B|-----10-8-8h10-------------------------------------|
G|---------------7h9~--------------------------------|
D|---------------------------------------------------|
A|---------------------------------------------------|
E|---------------------------------------------------|</span></span>

<span class="tablatura"><span class="cnt">E|---------------------------------------------------|
B|---------------------------------------------------|
G|---------------------------------------------------|
D|----------------------------------7-7-7-7-7--------|
A|-0-0-0-0-3-3-3-3-3-3-3-3/7-7-7-7--8-8-8-8-8--------|
E|---------5-5-5-5-5-5-5-5/8-8-8-8-------------------|</span></span>

<span class="tablatura"><span class="cnt">E|---------------------------------------------------|
B|---------------------------------------------------|
G|---------------------------------------------------|
D|---------------------------------------------------|
A|-3-3-3-3-3-3-3-3-3-3-3-3/7-7-7-7-------------------|
E|-5-5-5-5-5-5-5-5-5-5-5-5/8-8-8-8-------------------|</span></span>

<span class="tablatura"><span class="cnt">E|---------------------------------------------------|
B|---------------------------------------------------|
G|---------------------------------------------------|
D|---------------------------------------------------|
A|-3-3-3-3-3-3-3-3-3-3-3-3-3-3-3-3-------------------|
E|-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-------------------|</span></span>

<span class="tablatura"><span class="cnt">E|---------------------------------------------------|
B|---------------------------------------------------|
G|---------------------------------------------------|
D|---------------------------------------------------|
A|-2-2-2-2-2-2-2-2-2-2-2-2/7-7-7-7-------------------|
E|-3-3-3-3-3-3-3-3-3-3-3-3/8-8-8-8-------------------|</span></span>

[Refrão]

 <b>Am</b>                    <b>F7M/C</b>          <b>G</b>
Meus olhos grandes de medo revelam a solução
 <b>Am</b>                 <b>F7M/C</b>             <b>G</b>
Meu coração tem segredos que movem a solidão
A solidão

----------------- Acordes -----------------
Am = X 0 2 2 1 0
Am9/E = 0 0 2 4 1 0
F7M/C = X 3 3 2 1 0
G = 3 2 0 0 0 3
G6 = 3 2 0 0 3 0`;

const [title, ...restOfCifra] = cifra.split("\n\n");
const chordsSectionIndex = restOfCifra.findIndex((line) =>
  line.includes("----------------- Acordes -----------------")
);
const mainCifra = restOfCifra.slice(0, chordsSectionIndex).join("\n\n");
const chords = restOfCifra.slice(chordsSectionIndex).join("\n\n");

export default function ODiaQueNaoTerminouPage() {

    // Convert HTML to structured data
  const cifraStructure = convertToStructure(
    mainCifra || "",
    title || "",
    "https://www.cifraclub.com.br/detonautas/o-dia-que-nao-terminou/"
  );

  return (
    <>
      <CifraDisplay
        title={title || ""}
        cifraData={cifraStructure}
        // Fallback to old format if needed
        mainCifra={mainCifra || ""}
        chords={chords || ""}
      />
      <FloatingMenu />
    </>
  );
}
